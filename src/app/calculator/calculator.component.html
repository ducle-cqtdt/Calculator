<ng-container [formGroup]="formCalculator">
  <div class="container-fluid">
    <h1>Calculator</h1>
    <div class="grid">
      <div class="grid__center">
        <ng-container
          *ngTemplateOutlet="
            tmplInput;
            context: { inputId: 'inputA', controlName: 'inputA' }
          "
        ></ng-container>
        <div class="operator">
          <ng-container
            *ngFor="let item of operators"
            [ngTemplateOutlet]="operationTmpl"
            [ngTemplateOutletContext]="{
              operator: item.name,
              symbol: item.symbol
            }"
          >
          </ng-container>
        </div>
        <ng-container
          [ngTemplateOutlet]="tmplInput"
          [ngTemplateOutletContext]="{
            inputId: 'inputB',
            controlName: 'inputB'
          }"
        ></ng-container>

        <div class="arrow-down">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="16"
            height="16"
            fill="currentColor"
            class="bi bi-chevron-double-down"
            viewBox="0 0 16 16"
          >
            <path
              fill-rule="evenodd"
              d="M1.646 6.646a.5.5 0 0 1 .708 0L8 12.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"
            />
            <path
              fill-rule="evenodd"
              d="M1.646 2.646a.5.5 0 0 1 .708 0L8 8.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"
            />
          </svg>
        </div>

        <div class="form-group">
          <input
            id="output"
            [value]="result"
            type="text"
            class="form-control"
            readonly
          />
          <label for="output">Output</label>
        </div>
      </div>
      <div class="grid__right">
        <app-history></app-history>
      </div>
    </div>
  </div>
  <ng-template #tmplInput let-controlName="controlName" let-inputId="inputId">
    <div
      class="form-group"
      [class.alert-danger]="
        formCalculator.controls[controlName].invalid && isCalculate
      "
    >
      <input
        [id]="inputId"
        [formControlName]="controlName"
        (input)="inputNumber()"
        type="text"
        (keypress)="keyPress($event)"
        class="form-control"
        required
      />
      <label [for]="inputId">Input</label>
      <span
        class="tooltip"
        *ngIf="formCalculator.controls[controlName].invalid && isCalculate"
        >Field cannot be blank!</span
      >
    </div>
  </ng-template>
  <ng-template #operationTmpl let-operator="operator" let-symbol="symbol">
    <div>
      <button
        [class.active]="currentOperator === operator"
        (click)="getOperator(operator)"
      >
        {{ symbol }}
      </button>
    </div>
  </ng-template>
</ng-container>
